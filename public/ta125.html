<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TA125 Stock Data API</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .market-info {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .status {
            text-align: center;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .api-endpoint {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        .api-endpoint:hover {
            border-color: #007bff;
            box-shadow: 0 4px 15px rgba(0,123,255,0.1);
        }
        .endpoint-title {
            font-weight: bold;
            color: #495057;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        .endpoint-url {
            font-family: 'Courier New', monospace;
            background: #343a40;
            color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            word-break: break-all;
            margin-top: 10px;
        }
        .endpoint-url a {
            color: #17a2b8;
            text-decoration: none;
        }
        .endpoint-url a:hover {
            color: #20c997;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #856404;
        }
        .last-updated {
            text-align: center;
            color: #666;
            font-style: italic;
            margin-top: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ‡®ðŸ‡± TA125 Stock Data</h1>
        <div class="market-info">
            Tel Aviv Stock Exchange (TASE) â€¢ Israeli Securities â€¢ Updated Daily at 02:00 UTC
        </div>
        
        <div class="status">
            âœ… TA125 API is online and serving fresh Israeli stock data
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="symbolCount">125+</div>
                <div class="stat-label">TA125 Symbols</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">50</div>
                <div class="stat-label">Trading Days</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="successRate">95%</div>
                <div class="stat-label">Success Rate</div>
            </div>
        </div>

        <div class="note">
            <strong>ðŸ‡®ðŸ‡± TA125 Market Info:</strong> This API provides the last 50 trading days of OHLCV data for TA125 stocks traded on the Tel Aviv Stock Exchange (TASE). Data includes major Israeli companies across technology, finance, real estate, and energy sectors.
        </div>

        <h2>ðŸ“¡ API Endpoint:</h2>

        <div class="api-endpoint">
            <div class="endpoint-title">ðŸ‡®ðŸ‡± TA125 Stock Data (JSON)</div>
            <div class="endpoint-url">
                <a href="./ta125_ohlcv_latest.json" target="_blank">
                    ta125_ohlcv_latest.json
                </a>
            </div>
        </div>

        <h2>ðŸ“‹ Usage Examples:</h2>
        
        <div class="api-endpoint">
            <div class="endpoint-title">Flutter/Dart HTTP Request</div>
            <div class="endpoint-url">
final response = await http.get(
  Uri.parse('https://stock-data-hosting.web.app/ta125_ohlcv_latest.json')
);
final data = json.decode(response.body);
            </div>
        </div>

        <div class="api-endpoint">
            <div class="endpoint-title">JavaScript Fetch</div>
            <div class="endpoint-url">
fetch('https://stock-data-hosting.web.app/ta125_ohlcv_latest.json')
  .then(response => response.json())
  .then(data => {
    console.log(`TA125 symbols: ${data.successful_symbols}`);
    console.log('TEVA data:', data.data['TEVA.TA']);
  });
            </div>
        </div>

        <div class="last-updated" id="lastUpdated">
            Data updates daily at 02:00 UTC â€¢ Next update in <span id="countdown">calculating...</span>
        </div>
    </div>

    <script>
        // Load TA125 data and update stats
        fetch('./ta125_ohlcv_latest.json')
            .then(response => response.json())
            .then(data => {
                // Update symbol count
                document.getElementById('symbolCount').textContent = data.total_symbols || '125+';
                
                // Update success rate
                if (data.total_symbols && data.successful_symbols) {
                    const rate = Math.round((data.successful_symbols / data.total_symbols) * 100);
                    document.getElementById('successRate').textContent = rate + '%';
                }
                
                // Update last updated time
                if (data.last_updated) {
                    const lastUpdated = new Date(data.last_updated);
                    document.getElementById('lastUpdated').innerHTML = 
                        `Last updated: ${lastUpdated.toLocaleString()} â€¢ Currency: ${data.currency || 'ILS'}`;
                }
            })
            .catch(error => {
                document.getElementById('lastUpdated').innerHTML = 
                    'TA125 data file not found - workflow may still be running';
            });

        // Countdown to next update (02:00 UTC)
        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setUTCDate(tomorrow.getUTCDate() + 1);
            tomorrow.setUTCHours(2, 0, 0, 0);
            
            const diff = tomorrow - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            const countdownElement = document.getElementById('countdown');
            if (countdownElement) {
                countdownElement.textContent = `${hours}h ${minutes}m`;
            }
        }
        
        updateCountdown();
        setInterval(updateCountdown, 60000); // Update every minute
    </script>
</body>
</html>
